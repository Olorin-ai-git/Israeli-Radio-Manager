@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Base dark theme */
  :root {
    --bg-primary: #0f172a;
    --bg-secondary: #1e293b;
    --bg-tertiary: #334155;
    --text-primary: #f8fafc;
    --text-secondary: #94a3b8;
    --accent: #ef4444;
    --glass-bg: rgba(30, 41, 59, 0.7);
    --glass-border: rgba(255, 255, 255, 0.1);
  }

  /* Force consistent font across all elements */
  *,
  *::before,
  *::after {
    font-family: 'Inter', '-apple-system', 'system-ui', 'sans-serif' !important;
  }

  /* Form elements must inherit */
  button,
  input,
  textarea,
  select,
  option {
    font-family: inherit !important;
  }

  body {
    @apply bg-dark-950 text-dark-100;
    font-family: 'Inter', '-apple-system', 'system-ui', 'sans-serif' !important;
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
    min-height: 100vh;
  }

  /* RTL Support with Heebo font */
  [dir="rtl"],
  [dir="rtl"] *,
  [dir="rtl"] *::before,
  [dir="rtl"] *::after {
    direction: rtl;
    text-align: right;
    font-family: 'Heebo', 'Arial', 'sans-serif' !important;
  }
}

/* Glassmorphism utilities */
@layer components {
  .glass {
    @apply bg-dark-800/70 backdrop-blur-xl border border-white/10 shadow-glass;
  }

  .glass-light {
    @apply bg-white/5 backdrop-blur-lg border border-white/10;
  }

  .glass-card {
    @apply bg-dark-800/60 backdrop-blur-xl border border-white/10 rounded-2xl shadow-glass;
  }

  .glass-sidebar {
    @apply bg-dark-900/80 backdrop-blur-2xl border-r border-white/5 shadow-glass;
  }

  .glass-input {
    @apply bg-dark-800/50 backdrop-blur-sm border border-white/10 rounded-xl
           px-3 py-2 text-sm font-normal
           text-dark-100 placeholder-dark-400
           focus:border-primary-500/50 focus:ring-2 focus:ring-primary-500/30 focus:outline-none
           transition-all duration-200;
  }

  /* Native select element styling */
  select.glass-input {
    @apply bg-dark-800/50 backdrop-blur-sm border border-white/10 rounded-xl
           px-3 py-2 text-sm font-normal
           text-dark-100 cursor-pointer
           focus:border-primary-500/50 focus:ring-2 focus:ring-primary-500/30 focus:outline-none
           transition-all duration-200
           appearance-none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2394a3b8' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }

  select.glass-input option {
    @apply bg-dark-800 text-dark-100;
  }

  .glass-button {
    @apply bg-dark-700/50 backdrop-blur-sm border border-white/10 rounded-xl
           text-dark-100 shadow-glass-sm
           hover:bg-dark-600/50 hover:border-white/20 hover:shadow-glass
           transition-all duration-200;
  }

  .glass-button-primary {
    @apply bg-primary-500/80 backdrop-blur-sm border border-primary-400/30 rounded-xl
           text-white shadow-glass-sm hover:bg-primary-500 hover:shadow-glow
           transition-all duration-200;
  }

  .glass-button-success {
    @apply bg-emerald-500/80 backdrop-blur-sm border border-emerald-400/30 rounded-xl
           text-white shadow-glass-sm
           hover:bg-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.3)]
           transition-all duration-200;
  }

  .glass-button-danger {
    @apply bg-red-500/80 backdrop-blur-sm border border-red-400/30 rounded-xl
           text-white shadow-glass-sm
           hover:bg-red-500 hover:shadow-[0_0_20px_rgba(239,68,68,0.3)]
           transition-all duration-200;
  }

  .glass-button-warning {
    @apply bg-amber-500/80 backdrop-blur-sm border border-amber-400/30 rounded-xl
           text-white shadow-glass-sm
           hover:bg-amber-500 hover:shadow-[0_0_20px_rgba(245,158,11,0.3)]
           transition-all duration-200;
  }

  .nav-item {
    @apply flex items-center gap-3 px-4 py-3 mx-2 rounded-xl transition-all duration-200
           text-dark-300 hover:text-dark-100 hover:bg-white/5;
  }

  .nav-item-active {
    @apply bg-primary-500/20 text-primary-400 border border-primary-500/20;
  }
}

/* Custom scrollbar for dark theme */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-dark-900/50;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  @apply bg-dark-600/80;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-dark-500;
}

/* Queue item slide-in animation */
@keyframes slide-in-fade {
  0% {
    opacity: 0;
    transform: translateX(-30px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-in-fade {
  opacity: 0;
  transform: translateX(-30px);
  animation: slide-in-fade 300ms ease-out forwards;
}

/* Queue item slide-out animation */
@keyframes slide-out-fade {
  0% {
    opacity: 1;
    transform: translateX(0);
    max-height: 60px;
  }
  50% {
    opacity: 0;
    transform: translateX(30px);
    max-height: 60px;
  }
  100% {
    opacity: 0;
    transform: translateX(30px);
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    margin-top: 0;
    margin-bottom: 0;
  }
}

.animate-slide-out-fade {
  animation: slide-out-fade 300ms ease-in forwards;
  overflow: hidden;
}

/* Chat bubble styles - dark glassmorphic */
.chat-bubble-user {
  @apply bg-primary-500/90 text-white rounded-2xl rounded-br-sm backdrop-blur-sm;
}

.chat-bubble-assistant {
  @apply bg-dark-700/70 text-dark-100 rounded-2xl rounded-bl-sm backdrop-blur-sm border border-white/5;
}

[dir="rtl"] .chat-bubble-user {
  @apply rounded-br-2xl rounded-bl-sm;
}

[dir="rtl"] .chat-bubble-assistant {
  @apply rounded-bl-2xl rounded-br-sm;
}

/* Now playing animation with glow */
@keyframes pulse-audio {
  0%, 100% {
    transform: scaleY(0.5);
    opacity: 0.7;
  }
  50% {
    transform: scaleY(1);
    opacity: 1;
  }
}

.audio-bar {
  @apply bg-primary-500;
}

/* Only animate when parent has .is-playing class */
.is-playing .audio-bar {
  animation: pulse-audio 0.8s ease-in-out infinite;
}

.is-playing .audio-bar:nth-child(2) {
  animation-delay: 0.1s;
}

.is-playing .audio-bar:nth-child(3) {
  animation-delay: 0.2s;
}

.is-playing .audio-bar:nth-child(4) {
  animation-delay: 0.3s;
}

/* Glow effects */
@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
  }
  50% {
    box-shadow: 0 0 40px rgba(239, 68, 68, 0.5);
  }
}

.glow-animate {
  animation: glow-pulse 2s ease-in-out infinite;
}

/* Toast fade-in animation */
@keyframes toast-fade-in {
  from {
    transform: translateY(8px) scale(0.96);
    opacity: 0;
  }
  to {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

.animate-slide-in {
  animation: toast-fade-in 200ms ease-out forwards;
}

/* Slide up animation for panels */
@keyframes slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slide-up {
  animation: slide-up 200ms ease-out forwards;
}

/* Block drop animation */
@keyframes block-drop {
  0% {
    transform: translateY(-10px);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-block-drop {
  animation: block-drop 300ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Gradient text */
.gradient-text {
  @apply bg-gradient-to-r from-primary-400 to-primary-600 bg-clip-text text-transparent;
}

/* Stats card hover effect */
.stat-card {
  @apply glass-card p-6 hover:border-primary-500/30 hover:shadow-glow-lg transition-all duration-300;
}

/* Table styles */
.glass-table {
  @apply w-full;
}

.glass-table th {
  @apply text-left text-dark-400 text-sm font-medium px-4 py-3 border-b border-white/5;
}

.glass-table td {
  @apply px-4 py-3 text-dark-200 border-b border-white/5;
}

.glass-table tr:hover td {
  @apply bg-white/5;
}

/* Badge styles */
.badge {
  @apply px-2.5 py-1 text-xs font-medium rounded-full;
}

.badge-primary {
  @apply bg-primary-500/20 text-primary-400 border border-primary-500/30;
}

.badge-success {
  @apply bg-emerald-500/20 text-emerald-400 border border-emerald-500/30;
}

.badge-warning {
  @apply bg-amber-500/20 text-amber-400 border border-amber-500/30;
}

.badge-info {
  @apply bg-sky-500/20 text-sky-400 border border-sky-500/30;
}

/* Tooltip styles */
.tooltip-trigger {
  @apply relative;
}

.tooltip {
  @apply absolute left-full ml-2 top-1/2 -translate-y-1/2
         px-2.5 py-1.5 bg-dark-800 text-dark-100 text-xs rounded-lg
         whitespace-nowrap opacity-0 pointer-events-none
         transition-opacity duration-200 border border-white/10
         shadow-lg shadow-black/20 z-[100];
}

.tooltip-right {
  @apply left-full ml-2 right-auto mr-0;
}

.tooltip-left {
  @apply right-full mr-2 left-auto ml-0;
}

.tooltip-top {
  @apply bottom-full mb-2 top-auto left-1/2 -translate-x-1/2 translate-y-0;
}

.tooltip-bottom {
  @apply top-full mt-2 bottom-auto left-1/2 -translate-x-1/2 translate-y-0;
}

.tooltip-trigger:hover .tooltip {
  @apply opacity-100;
}
